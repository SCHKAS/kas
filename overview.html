<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financiële Tracker - Overzicht</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables for Firebase instances
        window.firebaseApp = null;
        window.db = null;
        window.auth = null;
        window.userId = null;
        window.isAuthReady = false;
        window.transactions = []; // Store transactions globally

        // Make Firestore functions globally available
        window.collection = collection;
        window.addDoc = addDoc;
        window.onSnapshot = onSnapshot;
        window.doc = doc;
        window.updateDoc = updateDoc;
        window.deleteDoc = deleteDoc;
        window.query = query;
        window.orderBy = orderBy;


        // Initialize Firebase and set up authentication
        window.initFirebase = async () => {
            // Updated app ID for this version to ensure data separation
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'finance-tracker-bulk-app';
            window.__app_id = appId; // Make it globally accessible for Firestore paths

            let firebaseConfig = {};

            // De Firebase configuratie is nu direct hieronder geplakt.
            // Deze is afkomstig van jouw Firebase project: schkas-66d27
            firebaseConfig = {
              apiKey: "AIzaSyCORzv-FVt-7ZUxMBUsmaTl9ZAGcgZk8io",
              authDomain: "schkas-66d27.firebaseapp.com",
              projectId: "schkas-66d27",
              storageBucket: "schkas-66d27.firebasestorage.app",
              messagingSenderId: "987453212703",
              appId: "1:987453212703:web:dcee394027367b74df2d2a"
            };
            // measurementId is niet nodig voor de functionaliteit van deze app en is verwijderd.

            if (Object.keys(firebaseConfig).length === 0 || firebaseConfig.apiKey === "YOUR_API_KEY") {
                console.error("Firebase configuratie is onvolledig of nog steeds een placeholder. Persistente opslag zal niet werken. Werk firebaseConfig bij met je echte Firebase projectgegevens.");
                // We gaan door met initialisatie om de app niet volledig te breken,
                // maar Firestore-bewerkingen zullen mislukken.
            }

            window.firebaseApp = initializeApp(firebaseConfig);
            window.db = getFirestore(window.firebaseApp);
            window.auth = getAuth(window.firebaseApp);

            // Listen for authentication state changes
            onAuthStateChanged(window.auth, async (user) => {
                if (user) {
                    window.userId = user.uid;
                    console.log("Gebruiker geauthenticeerd:", window.userId);
                } else {
                    // Meld anoniem aan als er geen gebruiker is ingelogd
                    try {
                        const __initial_auth_token = typeof window.__initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                        if (__initial_auth_token) {
                            await signInWithCustomToken(window.auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(window.auth);
                        }
                        window.userId = window.auth.currentUser.uid;
                        console.log("Anoniem aangemeld. Gebruikers-ID:", window.userId);
                    } catch (error) {
                        console.error("Fout tijdens anonieme aanmelding:", error);
                    }
                }
                window.isAuthReady = true;
                // Zodra authenticatie klaar is, laad transacties
                if (window.userId) {
                    loadTransactions();
                } else {
                    console.warn("Gebruikers-ID niet beschikbaar na authenticatiestatuswijziging.");
                }
            });
        };

        // BTW-percentage (aanpasbaar)
        const VAT_RATE = 0.21; // 21%

        // Categorieën waarop BTW teruggevorderd kan worden voor uitgaven
        const RECOVERABLE_VAT_EXPENSE_CATEGORIES = [
            "Producten",
            "Nutsvoorziening",
            "Boekhouder",
            "Verzekeringen",
            "Marketing",
            "Software",
            "Verbruiksartikelen"
        ];

        /**
         * Navigeert terug naar de landingspagina.
         */
        function navigateToHome() {
            window.location.href = 'index.html';
        }

        /**
         * Laadt transacties van Firestore en luistert naar real-time updates.
         */
        window.loadTransactions = function() {
            if (!window.db || !window.userId) {
                console.error("Firestore is niet geïnitialiseerd of gebruiker is niet geauthenticeerd. Kan transacties niet laden.");
                return;
            }

            const transactionsCollectionRef = window.collection(window.db, `artifacts/${window.__app_id}/users/${window.userId}/transactions`);
            // Gebruik onSnapshot om real-time updates te krijgen
            window.onSnapshot(window.query(transactionsCollectionRef, window.orderBy('timestamp', 'desc')), (snapshot) => {
                window.transactions = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                console.log("Transacties geladen/bijgewerkt:", window.transactions);
                updateQuarterOptions();
                displaySummary();
                renderTransactionList();
                generateReports(); // Generate reports after data is loaded
            }, (error) => {
                console.error("Fout bij laden transacties:", error);
            });

            document.getElementById('currentUserId').textContent = window.userId;
        }

        /**
         * Werkt de dropdown met kwartalen bij op basis van de ingevoerde transacties.
         */
        window.updateQuarterOptions = function() {
            const summaryQuarterSelect = document.getElementById('summaryQuarterSelect');
            const uniqueQuarters = [...new Set(window.transactions.map(t => t.quarter))]; // Haal unieke kwartalen op
            uniqueQuarters.sort(); // Sorteer de kwartalen

            let optionsHtml = '<option value="all">Alle kwartalen</option>';
            uniqueQuarters.forEach(q => {
                optionsHtml += `<option value="${q}">${q}</option>`;
            });
            summaryQuarterSelect.innerHTML = optionsHtml;

            // Selecteer het kwartaal van de laatst toegevoegde transactie, of 'all'
            if (window.transactions.length > 0) {
                // Probeer het meest recente kwartaal te selecteren
                const latestQuarter = window.transactions[0].quarter; // transactions are sorted by timestamp desc
                if (uniqueQuarters.includes(latestQuarter)) {
                    summaryQuarterSelect.value = latestQuarter;
                } else {
                    summaryQuarterSelect.value = 'all';
                }
            } else {
                summaryQuarterSelect.value = 'all';
            }
            displaySummary(); // Zorg ervoor dat de samenvatting direct wordt bijgewerkt
        }

        /**
         * Berekent en toont de samenvatting van inkomsten, uitgaven, BTW en winst
         * voor het geselecteerde kwartaal.
         */
        window.displaySummary = function() {
            const summaryQuarterSelect = document.getElementById('summaryQuarterSelect');
            const selectedQuarter = summaryQuarterSelect.value;
            const currentQuarterDisplay = document.getElementById('currentQuarterDisplay');

            const filteredTransactions = selectedQuarter === 'all'
                ? window.transactions
                : window.transactions.filter(t => t.quarter === selectedQuarter);

            let totalTreatments = 0;
            let totalSales = 0;
            let totalExpenses = 0;
            let totalRecoverableVATOnExpenses = 0; // Nieuwe variabele voor terug te vorderen BTW

            filteredTransactions.forEach(t => {
                if (t.type === 'income') {
                    if (t.category === 'treatments') {
                        totalTreatments += t.amount;
                    } else if (t.category === 'sales') {
                        totalSales += t.amount;
                    }
                } else if (t.type === 'expense') {
                    totalExpenses += t.amount;
                    // Controleer of de subcategorie in de lijst van terugvorderbare BTW-categorieën staat
                    if (RECOVERABLE_VAT_EXPENSE_CATEGORIES.includes(t.subcategory)) {
                        totalRecoverableVATOnExpenses += t.amount * VAT_RATE;
                    }
                }
            });

            const totalIncome = totalTreatments + totalSales;
            const totalVAT = totalIncome * VAT_RATE;
            // Pas de winstberekening aan om de teruggevorderde BTW mee te nemen
            const totalProfit = totalIncome - totalExpenses - totalVAT + totalRecoverableVATOnExpenses;

            document.getElementById('totalTreatments').textContent = `€ ${totalTreatments.toFixed(2)}`;
            document.getElementById('totalSales').textContent = `€ ${totalSales.toFixed(2)}`;
            document.getElementById('totalIncome').textContent = `€ ${totalIncome.toFixed(2)}`;
            document.getElementById('totalExpenses').textContent = `€ ${totalExpenses.toFixed(2)}`;
            document.getElementById('totalRecoverableVATOnExpenses').textContent = `€ ${totalRecoverableVATOnExpenses.toFixed(2)}`; // Toon terug te vorderen BTW
            document.getElementById('totalVAT').textContent = `€ ${totalVAT.toFixed(2)}`;
            document.getElementById('totalProfit').textContent = `€ ${totalProfit.toFixed(2)}`;

            currentQuarterDisplay.textContent = selectedQuarter === 'all' ? 'Alle Kwartalen' : selectedQuarter;
        }

        /**
         * Rendert de lijst van alle transacties in een tabel.
         */
        window.renderTransactionList = function() {
            const transactionListBody = document.getElementById('transactionListBody');
            transactionListBody.innerHTML = ''; // Maak de lijst leeg

            window.transactions.forEach(t => {
                const row = transactionListBody.insertRow();
                row.insertCell().textContent = t.quarter;
                row.insertCell().textContent = t.type === 'income' ? 'Inkomst' : 'Uitgave';
                row.insertCell().textContent = t.category || 'N.v.t.'; // Toon categorie of N.v.t.
                row.insertCell().textContent = t.subcategory || 'N.v.t.'; // Nieuwe kolom voor subcategorie
                row.insertCell().textContent = t.paymentMethod || 'N.v.t.'; // Now 'Betaling'
                row.insertCell().textContent = `€ ${t.amount ? t.amount.toFixed(2) : '0.00'}`; // Zorg voor een default waarde

                // Nieuwe cellen voor klantnaam, productnaam, factuurdatum, opmerkingen
                row.insertCell().textContent = t.customerName || 'N.v.t.';
                row.insertCell().textContent = t.productName || 'N.v.t.';
                row.insertCell().textContent = t.invoiceDate || 'N.v.t.';
                row.insertCell().textContent = t.remarks || 'N.v.t.';


                row.insertCell().textContent = new Date(t.timestamp).toLocaleDateString('nl-NL'); // Geformatteerde datum
                row.insertCell().textContent = t.person || 'Onbekend'; // Persoon kolom

                const actionsCell = row.insertCell();
                const editButton = document.createElement('button');
                editButton.textContent = 'Bewerken';
                editButton.className = 'edit-btn';
                // This will redirect to the input page with the transaction ID
                editButton.onclick = () => window.location.href = `input.html?editId=${t.id}`;
                actionsCell.appendChild(editButton);

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Verwijderen';
                deleteButton.className = 'delete-btn';
                deleteButton.onclick = () => deleteTransaction(t.id);
                actionsCell.appendChild(deleteButton);
            });
        }

        /**
         * Verwijdert een transactie uit Firestore.
         * @param {string} id - De ID van de transactie die verwijderd moet worden.
         */
        window.deleteTransaction = async function(id) {
            if (!window.db || !window.userId) {
                console.error("Firestore is niet geïnitialiseerd of gebruiker is niet geauthenticeerd. Kan transactie niet verwijderen.");
                return;
            }
            if (!confirm("Weet je zeker dat je deze transactie wilt verwijderen?")) {
                return;
            }
            try {
                const transactionRef = window.doc(window.db, `artifacts/${window.__app_id}/users/${window.userId}/transactions`, id);
                await window.deleteDoc(transactionRef);
                console.log("Transactie succesvol verwijderd:", id);
            } catch (e) {
                console.error("Fout bij verwijderen transactie:", e);
            }
        }

        /**
         * Genereert en toont verschillende rapporten.
         */
        function generateReports() {
            const incomeTransactions = window.transactions.filter(t => t.type === 'income');
            const expenseTransactions = window.transactions.filter(t => t.type === 'expense');

            // 1. Meest verkochte producten
            const productSales = {};
            incomeTransactions.filter(t => t.category === 'sales' && t.productName).forEach(t => {
                productSales[t.productName] = (productSales[t.productName] || 0) + t.amount;
            });
            renderReport('mostSoldProducts', 'Meest Verkochte Producten', productSales, 'amount', true);

            // 2. Meest geboekte behandelingen
            const treatmentBookings = {};
            incomeTransactions.filter(t => t.category === 'treatments' && t.subcategory).forEach(t => {
                treatmentBookings[t.subcategory] = (treatmentBookings[t.subcategory] || 0) + t.amount;
            });
            renderReport('mostBookedTreatments', 'Meest Geboekte Behandelingen', treatmentBookings, 'amount', true);

            // 3. Beste klanten (op basis van totale besteding)
            const customerSpending = {};
            incomeTransactions.filter(t => t.category === 'treatments' && t.customerName).forEach(t => {
                customerSpending[t.customerName] = (customerSpending[t.customerName] || 0) + t.amount;
            });
            renderReport('bestCustomers', 'Beste Klanten', customerSpending, 'amount', true);

            // 4. Hoogste daginkomsten
            const dailyIncome = {};
            incomeTransactions.forEach(t => {
                const date = new Date(t.timestamp).toLocaleDateString('nl-NL');
                dailyIncome[date] = (dailyIncome[date] || 0) + t.amount;
            });
            renderReport('highestDailyIncome', 'Hoogste Daginkomsten', dailyIncome, 'amount', true);

            // 5. Hoogste maandinkomsten
            const monthlyIncome = {};
            incomeTransactions.forEach(t => {
                const date = new Date(t.timestamp);
                const monthYear = `${date.toLocaleString('nl-NL', { month: 'long' })} ${date.getFullYear()}`;
                monthlyIncome[monthYear] = (monthlyIncome[monthYear] || 0) + t.amount;
            });
            renderReport('highestMonthlyIncome', 'Hoogste Maandinkomsten', monthlyIncome, 'amount', true);
        }

        /**
         * Rendert een algemeen rapport in een lijst.
         * @param {string} elementId - De ID van het HTML-element waar het rapport moet worden weergegeven.
         * @param {string} title - De titel van het rapport.
         * @param {object} data - Het object met de rapportdata (key: value).
         * @param {string} valueType - Het type waarde ('count' of 'amount').
         * @param {boolean} sortDescending - Of de lijst aflopend moet worden gesorteerd.
         */
        function renderReport(elementId, title, data, valueType, sortDescending = true) {
            const reportContainer = document.getElementById(elementId);
            if (!reportContainer) return;

            let items = Object.entries(data).map(([key, value]) => ({ key, value }));

            if (sortDescending) {
                items.sort((a, b) => b.value - a.value);
            } else {
                items.sort((a, b) => a.value - b.value);
            }

            let html = `<h3>${title}</h3><ul>`;
            if (items.length === 0) {
                html += `<li>Geen data beschikbaar.</li>`;
            } else {
                items.slice(0, 5).forEach(item => { // Toon top 5
                    html += `<li>${item.key}: ${valueType === 'amount' ? `€ ${item.value.toFixed(2)}` : item.value}</li>`;
                });
            }
            html += `</ul>`;
            reportContainer.innerHTML = html;
        }


        // Initialiseer de app bij het laden van de pagina
        window.onload = function() {
            window.initFirebase(); // Initialiseer Firebase
            // De dropdown voor kwartaaloverzicht wordt geladen via loadTransactions -> updateQuarterOptions
        };
    </script>
    <style>
        /* Tailwind CSS wordt gebruikt voor styling */
        body {
            font-family: 'Calibri', sans-serif; /* Changed font to Calibri */
            background-color: #e0f2f7; /* Soft pastel blue */
            color: #4a5568; /* Darker grey for better readability */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Lijn bovenaan uit */
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            flex-direction: column; /* Stack elements vertically */
        }
        .container {
            background-color: #ffffff; /* White for the main container */
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 900px; /* Bredere container */
            width: 100%;
            text-align: left;
            margin-bottom: 20px; /* Space before next container */
        }
        h1, h2 {
            color: #2c5282; /* Darker blue for headings */
            margin-bottom: 20px;
            font-size: 2.2rem;
            text-align: center;
        }
        h2 {
            font-size: 1.8rem;
            margin-top: 30px;
            text-align: center;
        }
        h3 {
            color: #2c5282;
            font-size: 1.4rem;
            margin-top: 25px;
            margin-bottom: 15px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 5px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #4a5568;
        }
        input[type="text"], input[type="number"], input[type="date"], select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #a0aec0; /* Softer border color */
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
            transition: background-color 0.2s ease; /* Add transition for color changes */
        }
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        button {
            background-color: #63b3ed; /* Soft blue for buttons */
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            margin-top: 10px;
        }
        button:hover {
            background-color: #4299e1; /* Slightly darker blue on hover */
            transform: translateY(-2px);
        }
        .summary-section, .transaction-list-section, .reports-section {
            margin-top: 40px;
            border-top: 1px solid #e2e8f0;
            padding-top: 30px;
        }
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #cbd5e0; /* Softer dashed border */
        }
        .summary-item:last-child {
            border-bottom: none;
        }
        .summary-item strong {
            color: #2d3748;
        }
        .total-vat {
            font-size: 1.2rem;
            font-weight: bold;
            color: #e53e3e; /* Red for VAT */
            margin-top: 15px;
            text-align: right;
        }
        .total-profit {
            font-size: 1.3rem;
            font-weight: bold;
            color: #48bb78; /* Green for profit */
            margin-top: 20px;
            text-align: right;
        }
        .error-message {
            color: #e53e3e;
            margin-top: 10px;
            font-size: 0.9rem;
            display: none; /* Standaard verborgen */
        }
        .transaction-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            table-layout: fixed; /* Added to fix column widths */
        }
        .transaction-table th, .transaction-table td {
            border: 1px solid #e2e8f0;
            padding: 8px; /* Adjusted padding */
            text-align: left;
            vertical-align: top; /* Ensure content aligns at the top */
            overflow: hidden; /* Added for text truncation */
            text-overflow: ellipsis; /* Added for text truncation */
            white-space: nowrap; /* Added for text truncation */
        }
        .transaction-table th {
            background-color: #ebf8ff; /* Lighter blue for table headers */
            font-weight: bold;
            color: #4a5568;
        }
        .transaction-table tr:nth-child(even) {
            background-color: #f7fafc; /* Very light blue for even rows */
        }
        .transaction-table button {
            padding: 6px 12px;
            font-size: 0.9rem;
            margin-right: 5px;
            border-radius: 6px;
            box-shadow: none;
        }
        .transaction-table button.edit-btn {
            background-color: #fbd38d; /* Soft orange for edit */
        }
        .transaction-table button.edit-btn:hover {
            background-color: #f6ad55;
        }
        .transaction-table button.delete-btn {
            background-color: #fc8181; /* Soft red for delete */
        }
        .transaction-table button.delete-btn:hover {
            background-color: #e53e3e;
        }
        .user-id-display {
            text-align: center;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #718096;
        }
        /* Custom colors for categories (soft pastel versions) */
        .bg-income { background-color: #d4edda; } /* Soft green */
        .bg-expense { background-color: #f8d7da; } /* Soft red */
        .bg-treatments { background-color: #cce5ff; } /* Soft blue */
        .bg-sales { background-color: #e2d9f7; } /* Soft purple */

        /* Specific column widths for better control */
        .transaction-table th:nth-child(1), .transaction-table td:nth-child(1) { width: 10%; } /* Kwartaal */
        .transaction-table th:nth-child(2), .transaction-table td:nth-child(2) { width: 8%; }  /* Type */
        .transaction-table th:nth-child(3), .transaction-table td:nth-child(3) { width: 10%; } /* Categorie */
        .transaction-table th:nth-child(4), .transaction-table td:nth-child(4) { width: 12%; } /* Subcategorie */
        .transaction-table th:nth-child(5), .transaction-table td:nth-child(5) { width: 10%; } /* Betaling */
        .transaction-table th:nth-child(6), .transaction-table td:nth-child(6) { width: 8%; }  /* Bedrag */
        .transaction-table th:nth-child(7), .transaction-table td:nth-child(7) { width: 10%; } /* Klantnaam */
        .transaction-table th:nth-child(8), .transaction-table td:nth-child(8) { width: 10%; } /* Productnaam */
        .transaction-table th:nth-child(9), .transaction-table td:nth-child(9) { width: 10%; } /* Factuurdatum */
        .transaction-table th:nth-child(10), .transaction-table td:nth-child(10) { width: 10%; } /* Opmerkingen */
        .transaction-table th:nth-child(11), .transaction-table td:nth-child(11) { width: 10%; } /* Datum Ingave */
        .transaction-table th:nth-child(12), .transaction-table td:nth-child(12) { width: 10%; } /* Ingevoerd Door */
        .transaction-table th:nth-child(13), .transaction-table td:nth-child(13) { width: 15%; } /* Acties (buttons) */

        /* Reports section styling */
        .reports-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .report-card {
            background-color: #f7faff; /* Lighter background for report cards */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid #e0e7ff; /* Soft border */
        }
        .report-card h3 {
            margin-top: 0;
            font-size: 1.2rem;
            color: #2c5282;
            border-bottom: 1px dashed #c3dafe;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        .report-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .report-card li {
            padding: 5px 0;
            border-bottom: 1px dotted #ebf4ff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .report-card li:last-child {
            border-bottom: none;
        }
        .report-card li span {
            font-weight: bold;
            color: #3182ce;
        }
        .back-button-container {
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Financiële Overzicht</h1>

        <div class="user-id-display">
            Je gebruikers-ID: <span id="currentUserId">Laden...</span>
        </div>

        <div class="summary-section">
            <h2 class="text-xl font-semibold mb-4">Overzicht Kwartaal <span id="currentQuarterDisplay">Q1 2024</span></h2>

            <div class="input-group">
                <label for="summaryQuarterSelect">Selecteer Kwartaal voor Overzicht:</label>
                <select id="summaryQuarterSelect" onchange="displaySummary(); generateReports()"></select>
            </div>

            <div class="summary-item">
                <span>Inkomsten (Behandelingen):</span>
                <span id="totalTreatments">€ 0.00</span>
            </div>
            <div class="summary-item">
                <span>Inkomsten (Verkoop):</span>
                <span id="totalSales">€ 0.00</span>
            </div>
            <div class="summary-item">
                <span>Totaal Inkomsten:</span>
                <span id="totalIncome">€ 0.00</span>
            </div>
            <div class="summary-item">
                <span>Totaal Uitgaven:</span>
                <span id="totalExpenses">€ 0.00</span>
            </div>
            <div class="summary-item">
                <span>Terug te vorderen BTW op uitgaven:</span>
                <span id="totalRecoverableVATOnExpenses">€ 0.00</span>
            </div>
            <div class="total-vat">
                <span>Geschatte BTW (21% over Inkomsten):</span>
                <span id="totalVAT">€ 0.00</span>
            </div>
            <div class="total-profit">
                <span>Geschatte Winst (Inkomsten - Uitgaven - BTW + Terug te vorderen BTW):</span>
                <span id="totalProfit">€ 0.00</span>
            </div>
        </div>

        <div class="reports-section">
            <h2 class="text-xl font-semibold mb-4">Rapporten</h2>
            <div class="reports-grid">
                <div class="report-card">
                    <div id="mostSoldProducts"></div>
                </div>
                <div class="report-card">
                    <div id="mostBookedTreatments"></div>
                </div>
                <div class="report-card">
                    <div id="bestCustomers"></div>
                </div>
                <div class="report-card">
                    <div id="highestDailyIncome"></div>
                </div>
                <div class="report-card">
                    <div id="highestMonthlyIncome"></div>
                </div>
            </div>
        </div>

        <div class="transaction-list-section">
            <h2 class="text-xl font-semibold mb-4">Alle Transacties</h2>
            <table class="transaction-table">
                <thead>
                    <tr>
                        <th>Kwartaal</th>
                        <th>Type</th>
                        <th>Categorie</th>
                        <th>Subcategorie</th>
                        <th>Betaling</th>
                        <th>Bedrag (€)</th>
                        <th>Klantnaam</th>
                        <th>Productnaam</th>
                        <th>Factuurdatum</th>
                        <th>Opmerkingen</th>
                        <th>Datum Ingave</th>
                        <th>Ingevoerd Door</th>
                        <th>Acties</th>
                    </tr>
                </thead>
                <tbody id="transactionListBody">
                    <!-- Transacties worden hier dynamisch toegevoegd -->
                </tbody>
            </table>
        </div>

        <div class="back-button-container">
            <button onclick="navigateToHome()">Terug naar Start</button>
        </div>
    </div>

</body>
</html>
